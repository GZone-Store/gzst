<!DOCTYPE html>
<html lang="th" class="bg-[#1e0a2a] text-white">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GZone-Store</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/heroicons@2.0.16/dist/outline.min.js"></script>
  <style>
    @keyframes marquee {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }

    .animate-marquee {
      display: inline-block;
      white-space: nowrap;
      animation: marquee 15s linear infinite;
    }

    .dot {
      width: 6px;
      height: 6px;
      border-radius: 9999px;
      margin: 0 4px;
      background-color: white;
      opacity: 0.5;
    }

    .dot.active {
      background-color: #a855f7;
      opacity: 1;
    }
  </style>
</head>

<body class="flex flex-col min-h-screen">

  <!-- โลโก้ -->
  <div id="logoBar" class="fixed top-0 w-full bg-[#1e0a2a] z-20">
    <div class="p-4">
      <img src="logo.png.png" alt="Logo" class="h-10 mx-auto" />
    </div>
  </div>

  <!-- หน้าแรก -->
  <div id="home" class="flex-1 pb-16 block pt-20">
    <!-- แบนเนอร์ -->
    <div class="relative w-full overflow-hidden h-40">
      <div id="banner-carousel" class="flex transition-transform duration-500 ease-in-out">
        <img src="banner3.png.jpg" class="w-full h-40 object-cover flex-shrink-0" />
        <img src="banner1.png.jpg" class="w-full h-40 object-cover flex-shrink-0" />
        <img src="banner2.png.jpg" class="w-full h-40 object-cover flex-shrink-0" />
        <img src="banner3.png.jpg" class="w-full h-40 object-cover flex-shrink-0" />
        <img src="banner1.png.jpg" class="w-full h-40 object-cover flex-shrink-0" />
      </div>
      <div class="absolute bottom-2 left-1/2 transform -translate-x-1/2 flex">
        <div class="dot" id="dot0"></div>
        <div class="dot" id="dot1"></div>
        <div class="dot" id="dot2"></div>
      </div>
    </div>

    <!-- ประกาศ -->
    <div class="bg-[#2e1b44] px-4 py-2 mt-2 overflow-hidden text-sm">
      <div class="whitespace-nowrap animate-marquee">
        <span class="mr-6">ประกาศ: เกมใหม่มาแล้ว! อย่าลืมลองโหลดดูนะครับ</span>
        <span class="mr-6">โปรโมชั่นเดือนนี้ โหลดฟรีไม่เสียค่าใช้จ่าย!</span>
      </div>
    </div>

    <!-- หัวข้อ -->
    <h2 class="text-lg font-bold px-4 pt-4">เกมยอดนิยม</h2>

    <!-- รายการเกม -->
    <div class="grid grid-cols-2 gap-4 p-4">
      <script>
        const gameList = [
          { name: "Love Warriors", image: "game1.png.jpg", link: "https://example.com/love-warriors" },
          { name: "Love & Battle", image: "game2.png.jpg", link: "https://example.com/love-battle" },
          { name: "Zombie Fight", image: "game3.png.jpg", link: "https://example.com/zombie-fight" },
          { name: "Car Drift", image: "game4.png.jpg", link: "https://example.com/car-drift" },
          { name: "Shooting Pro", image: "game5.png.jpg", link: "https://example.com/shooting-pro" },
          { name: "Dragon Love", image: "game6.png.jpg", link: "https://example.com/dragon-love" },
          { name: "Adventure World", image: "game7.png.jpg", link: "https://example.com/adventure-world" },
          { name: "Puzzle Love", image: "game8.png.jpg", link: "https://example.com/puzzle-love" },
          { name: "GZONE STORE", image: "gzone.png.png", link: "https://example.com/puzzle-love" },
        ];

        window.onload = () => {
          const grid = document.querySelector("#home .grid");
          gameList.forEach(game => {
            const div = document.createElement("div");
            div.className = "bg-[#2b1140] rounded-2xl p-2 text-left";
            div.innerHTML = `
              <img src="${game.image}" alt="${game.name}" class="rounded-xl mb-2" />
              <div class="text-white font-semibold">${game.name}</div>
              <a href="${game.link}" target="_blank" class="bg-purple-500 block text-center mt-2 py-1 rounded-xl">ดาวน์โหลด</a>
            `;
            grid.appendChild(div);
          });
          goTo("home"); // เปิดหน้าแรกและโชว์โลโก้เมื่อโหลด
        };
      </script>
    </div>
  </div>

  <!-- หน้าค้นหา -->
  <div id="search" class="hidden flex-1 pb-16">
    <div class="fixed top-0 w-full bg-[#1e0a2a] z-10 p-4 flex items-center">
      <input type="text" id="searchInput" placeholder="ค้นหาเกมที่นี่..." class="flex-1 rounded-full border border-gray-300 px-4 py-2 text-sm text-black" />
      <button id="searchButton" class="ml-2 p-2 bg-purple-500 rounded-full">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35M17 11a6 6 0 11-12 0 6 6 0 0112 0z" />
        </svg>
      </button>
    </div>
    <div class="pt-20 px-4 pb-4 space-y-3 text-white text-sm" id="searchResults"></div>
  </div>

  <!-- Firebase App (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <!-- Firebase Auth (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <!-- Firebase Analytics (optional) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-analytics-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAuWomazKXngJRI5eGaLs3YPNJ0fQ1-_Hc",
      authDomain: "gzone-store.firebaseapp.com",
      projectId: "gzone-store",
      storageBucket: "gzone-store.firebasestorage.app",
      messagingSenderId: "20383169229",
      appId: "1:20383169229:web:e225735efbea6589120784",
      measurementId: "G-WZLDR9JQKS"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics(); // หากต้องการใช้ Analytics
  </script>

  <!-- หน้าบัญชี -->
  <div id="account" class="hidden flex-1 pb-16">
    <div class="relative">
      <!-- ภาพปกหลัง -->
      <img src="cover.jpg" class="w-full h-32 object-cover" />
      <!-- รูปโปรไฟล์ -->
      <div class="absolute -bottom-10 left-1/2 transform -translate-x-1/2">
        <img src="profile.png" class="w-20 h-20 rounded-full border-4 border-[#1e0a2a] object-cover" />
      </div>
    </div>

    <div class="mt-14 text-center" id="user-info">
      <!-- เมื่อผู้ใช้ยังไม่ได้เข้าสู่ระบบ -->
      <div class="hidden" id="login-prompt">
        <button class="text-sm text-purple-400 hover:underline" id="login-button">
          เข้าสู่ระบบ
        </button>
        <span class="mx-2">หรือ</span>
        <button class="text-sm text-purple-400 hover:underline" id="signup-button">
          สมัครสมาชิก
        </button>
      </div>

      <!-- เมื่อผู้ใช้เข้าสู่ระบบ -->
      <div class="hidden" id="user-details">
        <div class="text-xl font-bold" id="user-name">ชื่อของคุณ</div>    
  <div class="text-sm text-gray-300" id="user-email">email@example.com</div>    
      <!-- ปุ่มแก้ไขโปรไฟล์ -->    <button class="mt-2 text-sm text-purple-400 hover:underline">    
    <svg xmlns="http://www.w3.org/2000/svg" class="inline w-4 h-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">    
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"    
        d="M15.232 5.232l3.536 3.536M4 20h4.586a1 1 0 00.707-.293l10.414-10.414a2 2 0 000-2.828l-2.828-2.828a2 2 0 00-2.828 0L4 15.586V20z" />    
    </svg>    
    แก้ไขโปรไฟล์    
  </button>    
</div>  </div>    <!-- เมนูเพิ่มเติม -->    
  <div class="mt-6 space-y-3 px-6">    
    <!-- Support / Donate -->    
    <details class="group bg-[#2e1b44] rounded-xl px-4 py-3">    
      <summary class="cursor-pointer text-white font-medium flex items-center justify-between">    
        Support / Donate    
        <svg class="w-4 h-4 text-white transition-transform duration-300 group-open:rotate-180"    
          xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24">    
          <path d="M7 10l5 5 5-5H7z" />    
        </svg>    
      </summary>    
      <div class="mt-3 space-y-2 pl-4 text-sm text-purple-300">    
        <a href="https://line.me/..." target="_blank" class="flex items-center space-x-2 hover:underline rounded-xl bg-[#1e0a2a] px-4 py-2">    
          <div class="w-8 h-8 rounded-full bg-white flex items-center justify-center border-4 border-[#1e0a2a]">    
            <img src="line-icon.png" alt="LINE" class="w-6 h-6" />    
          </div>    
          <span>LINE</span>    
        </a>    
        <a href="https://t.me/..." target="_blank" class="flex items-center space-x-2 hover:underline rounded-xl bg-[#1e0a2a] px-4 py-2">    
          <div class="w-8 h-8 rounded-full bg-white flex items-center justify-center border-4 border-[#1e0a2a]">    
            <img src="telegram-icon.png" alt="Telegram" class="w-6 h-6" />    
          </div>    
          <span>Telegram</span>    
        </a>    
      </div>    
    
      <!-- ติดต่อเรา -->
    </details>    
<details class="group bg-[#2e1b44] rounded-xl px-4 py-3">    
  <summary class="cursor-pointer text-white font-medium flex items-center justify-between">    
    ติดต่อเรา    
    <svg class="w-4 h-4 text-white transition-transform duration-300 group-open:rotate-180"    
      xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24">    
      <path d="M7 10l5 5 5-5H7z" />    
    </svg>    
  </summary>    
  <div class="mt-3 space-y-2 pl-4 text-sm text-purple-300">    
    <a href="mailto:contact@example.com" class="flex items-center space-x-2 hover:underline rounded-xl bg-[#1e0a2a] px-4 py-2">    
      <div class="w-8 h-8 rounded-full bg-white flex items-center justify-center border-4 border-[#1e0a2a]">    
        <img src="email-icon.png" alt="Email" class="w-6 h-6" />    
      </div>    
      <span>อีเมล</span>    
    </a>    
    <a href="https://facebook.com/example" target="_blank" class="flex items-center space-x-2 hover:underline rounded-xl bg-[#1e0a2a] px-4 py-2">    
      <div class="w-8 h-8 rounded-full bg-white flex items-center justify-center border-4 border-[#1e0a2a]">    
        <img src="facebook-icon.png" alt="Facebook" class="w-6 h-6" />    
      </div>    
      <span>Facebook</span>    
    </a>    
    <a href="tel:0800000000" class="flex items-center space-x-2 hover:underline rounded-xl bg-[#1e0a2a] px-4 py-2">    
      <div class="w-8 h-8 rounded-full bg-white flex items-center justify-center border-4 border-[#1e0a2a]">    
        <img src="phone-icon.png" alt="Phone" class="w-6 h-6" />    
      </div>    
      <span>โทรศัพท์</span>    
    </a>    
  </div>    
  
  </div> <!-- ปุ่มเมนูอื่น -->
</details>
<a href="#" class="block bg-[#2e1b44] rounded-xl px-4 py-3 text-white font-medium">Download App</a>
<a href="#" class="block bg-[#2e1b44] rounded-xl px-4 py-3 text-white font-medium">ภาษา</a>

<!-- ปุ่มออกจากระบบ -->
<button
  onclick="firebase.auth().signOut()"
  class="hidden w-full mt-6 bg-red-700 hover:bg-red-800 text-white font-medium px-4 py-3 rounded-xl"
  id="sign-out-button"
>
  ออกจากระบบ
</button>
</div>
</div>

<!-- Modal สมัครสมาชิก / เข้าสู่ระบบ -->
<div
 id="auth-modal"
 class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 z-50 hidden"
>
<div class="bg-white rounded-xl p-6 w-full max-w-sm relative">
 <button class="absolute top-2 right-3 text-gray-500" onclick="closeAuthilodal()">&times;</button>
 <h2 id="auth-title" class="text-ig font-bold mb-4 text-center">เข้าสู่ระบบ</h2>
 <input
   type="email"
   id="auth-email"
   placeholder="อีเมล"
   class="w-full mb-2 px-3 py-2 border rounded"
/>
<input
  type="password"
  id="auth-password"
  placeholder="รหัสผ่าน"
  class="w-full mb-4 px-3 py-2 border rounded"
/>
<button
  id="auth-action-button"
  class="bg-purple-600 text-white w-full py-2 rounded mb-2"
>
 เข้าสู่ระบบ
</button>
<button
 onclick="googleLogin()"
 class="bg-red-500 text-white w-full py-2 rounded mb-2"
>
 เข้าสู่ระบบด้วย Google
</button>
<p class="text-center text-sm text-gray-600">
  <span id="auth-switch">
  ยังไม่มีบัญชี?
  <button onclick="switchToSignup()" class="text-purple-600">สมัครสมาชิก</button>
  </span>
 </p>
</div>
</div>
  
<script>
function togglePassword(id, btn) {
  const input = document.getElementById(id);
  if (input.type === "password") {
    input.type = "text";
    btn.querySelector('svg').setAttribute('stroke', 'purple');
  } else {
    input.type = "password";
    btn.querySelector('svg').setAttribute('stroke', 'currentColor');
  }
}

function toggleRegister() {
  const confirmPassword = document.getElementById("confirmPasswordWrapper");
  if (confirmPassword.classList.contains("hidden")) {
    confirmPassword.classList.remove("hidden");
    document.getElementById("loginButton").textContent = "สมัครสมาชิก";
  } else {
    confirmPassword.classList.add("hidden");
    document.getElementById("loginButton").textContent = "เข้าสู่ระบบ";
  }
}

function closeModal() {
  document.getElementById('authModal').classList.add('hidden');
}
</script>
<script>
function closeAuthModal() {
  document.getElementById('auth-modal').classList.add('hidden');
}

// เปิด modal (ถ้ามีปุ่มเปิดอยู่แล้วไม่ต้องทำ)
function openAuthModal() {
  document.getElementById('auth-modal').classList.remove('hidden');
}

// สลับไปหน้า สมัครสมาชิก
function switchToSignup() {
  document.getElementById('auth-title').innerText = 'สมัครสมาชิก';
  document.getElementById('auth-action-button').innerText = 'สมัครสมาชิก';
  document.getElementById('auth-switch').innerHTML = `มีบัญชีอยู่แล้ว? 
    <button onclick="switchToLogin()" class="text-purple-600">เข้าสู่ระบบ</button>`;
}

// สลับกลับไปหน้า เข้าสู่ระบบ
function switchToLogin() {
  document.getElementById('auth-title').innerText = 'เข้าสู่ระบบ';
  document.getElementById('auth-action-button').innerText = 'เข้าสู่ระบบ';
  document.getElementById('auth-switch').innerHTML = `ยังไม่มีบัญชี? 
    <button onclick="switchToSignup()" class="text-purple-600">สมัครสมาชิก</button>`;
}
</script>

<!-- Script จัดการ Modal และ Firebase Auth -->
<script>
  const authModal = document.getElementById('auth-modal');
  const authTitle = document.getElementById('auth-title');
  const authActionBtn = document.getElementById('auth-action-button');
  const authSwitch = document.getElementById('auth-switch');

  let isSignup = false;

  function openAuthModal(signup = false) {
    isSignup = signup;
    authModal.classList.remove('hidden');
    updateAuthModal();
  }

  function closeAuthModal() {
    authModal.classList.add('hidden');
  }

  function updateAuthModal() {
    authTitle.textContent = isSignup ? 'สมัครสมาชิก' : 'เข้าสู่ระบบ';
    authActionBtn.textContent = isSignup ? 'สมัครสมาชิก' : 'เข้าสู่ระบบ';
    authSwitch.innerHTML = isSignup
      ? 'มีบัญชีแล้ว? <button onclick="switchToLogin()" class="text-purple-600">เข้าสู่ระบบ</button>'
      : 'ยังไม่มีบัญชี? <button onclick="switchToSignup()" class="text-purple-600">สมัครสมาชิก</button>';
  }

  function switchToSignup() {
    isSignup = true;
    updateAuthModal();
  }

  function switchToLogin() {
    isSignup = false;
    updateAuthModal();
  }

  document.getElementById('login-button').addEventListener('click', () => openAuthModal(false));
  document.getElementById('signup-button').addEventListener('click', () => openAuthModal(true));

  authActionBtn.addEventListener('click', () => {
    const email = document.getElementById('auth-email').value;
    const password = document.getElementById('auth-password').value;

    if (isSignup) {
      firebase.auth().createUserWithEmailAndPassword(email, password)
        .then(closeAuthModal)
        .catch(error => alert(error.message));
    } else {
      firebase.auth().signInWithEmailAndPassword(email, password)
        .then(closeAuthModal)
        .catch(error => alert(error.message));
    }
  });

  function googleLogin() {
    const provider = new firebase.auth.GoogleAuthProvider();
    firebase.auth().signInWithPopup(provider)
      .then(closeAuthModal)
      .catch(error => alert(error.message));
  }
</script>

<!-- ตรวจสอบสถานะการล็อกอิน -->
<script>
  firebase.auth().onAuthStateChanged(user => {
    const loginPrompt = document.getElementById('login-prompt');
    const userDetails = document.getElementById('user-details');
    const userName = document.getElementById('user-name');
    const userEmail = document.getElementById('user-email');
    const signOutButton = document.getElementById('sign-out-button');

    if (user) {
      loginPrompt.classList.add('hidden');
      userDetails.classList.remove('hidden');
      signOutButton.classList.remove('hidden');

      userName.textContent = user.displayName || 'ชื่อของคุณ';
      userEmail.textContent = user.email;
    } else {
      loginPrompt.classList.remove('hidden');
      userDetails.classList.add('hidden');
      signOutButton.classList.add('hidden');
    }
  });
</script>
</script>

<!-- เมนูด้านล่าง -->
<nav class="fixed bottom-0 left-0 right-0 bg-[#1a0526] text-white flex justify-around items-center h-16 border-t border-purple-800">
  <button onclick="goTo('home')" class="flex flex-col items-center">
    <img src="icon-home.png.png" class="w-6 h-6" />
    <span class="text-xs">หน้าแรก</span>
  </button>
  <button onclick="goTo('search')" class="flex flex-col items-center">
    <img src="icon-search.png.png" class="w-6 h-6" />
    <span class="text-xs">ค้นหา</span>
  </button>
  <button onclick="goTo('account')" class="flex flex-col items-center">
    <img src="icon-user.png.png" class="w-6 h-6" />
    <span class="text-xs">บัญชี</span>
  </button>
</nav>

<script>
  const carousel = document.getElementById("banner-carousel");
  const dots = [
    document.getElementById("dot0"),
    document.getElementById("dot1"),
    document.getElementById("dot2"),
  ];
  let index = 1, total = 3, allowClick = true;

  const updateDots = () => {
    dots.forEach((dot, i) => {
      dot.classList.toggle("active", i === (index - 1 + total) % total);
    });
  };

  const goToSlide = i => {
    carousel.style.transition = "transform 0.5s ease-in-out";
    carousel.style.transform = `translateX(-${i * 100}%)`;
    updateDots();
  };

  const nextSlide = () => {
    if (!allowClick) return;
    allowClick = false;
    index++;
    goToSlide(index);
    setTimeout(() => {
      if (index === total + 1) {
        carousel.style.transition = "none";
        index = 1;
        carousel.style.transform = `translateX(-${index * 100}%)`;
      }
      allowClick = true;
    }, 600);
  };

  let interval = setInterval(nextSlide, 3000);
  carousel.style.transform = `translateX(-${index * 100}%)`;
  updateDots();

  // Swipe gesture
  let startX = 0;
  carousel.addEventListener("touchstart", (e) => {
    startX = e.touches[0].clientX;
  });

  carousel.addEventListener("touchend", (e) => {
    const endX = e.changedTouches[0].clientX;
    const diff = startX - endX;
    if (Math.abs(diff) > 50) {
      if (diff > 0) {
        nextSlide();
      } else {
        index = (index - 2 + total) % total + 1;
        goToSlide(index);
      }
    }
  });

  // Navigation
  function goTo(page) {
    ["home", "search", "account"].forEach(id => {
      document.getElementById(id).classList.add("hidden");
    });
    document.getElementById(page).classList.remove("hidden");

    const logoBar = document.getElementById("logoBar");
    if (page === "home") logoBar.classList.remove("hidden");
    else logoBar.classList.add("hidden");
  }

  // Search
  document.getElementById("searchButton").addEventListener("click", () => {
    const keyword = document.getElementById("searchInput").value.trim().toLowerCase();
    const matched = gameList.filter(g => g.name.toLowerCase().includes(keyword));
    const container = document.getElementById("searchResults");

    container.innerHTML = matched.length
      ? matched.map(g => `
        <div class="flex justify-between items-center bg-[#2e1b44] p-2 rounded-xl">
          <div class="flex items-center space-x-3">
            <img src="${g.image}" class="w-14 h-14 rounded-lg object-cover" />
            <div>${g.name}</div>
          </div>
          <a href="${g.link}" target="_blank" class="bg-purple-500 px-4 py-1 rounded-xl text-sm">ดาวน์โหลด</a>
        </div>`).join("")
      : `<div class="text-center text-gray-400 mt-6">ไม่พบเกมที่คุณค้นหา</div>`;
  });
</script>

</body>
</html>
